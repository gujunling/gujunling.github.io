(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{423:function(s,n,a){"use strict";a.r(n);var e=a(7),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"css中使用js的变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css中使用js的变量"}},[s._v("#")]),s._v(" css中使用js的变量")]),s._v(" "),n("p",[s._v("作为一个前端开发者，css和js是我们日常工作中必不可少的。在实际的项目开发中我们经常会遇到一些动态改变的样式，此时传统的css已经不能满足我们的需求，使用js直接操作dom设置css样式的成本又较大，且可能会导致代码的可读性降低，因此在css属性值中使用js操作的变量就显得尤为重要了，本文就通过实际项目操作现场展示如何做到在css属性值中使用js变量，作为一个前端开发过程中的小技巧。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("本章内容是博主自身开发过程中使用的，若有不足，欢迎指正。")])]),s._v(" "),n("h2",{attrs:{id:"前置知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前置知识"}},[s._v("#")]),s._v(" 前置知识")]),s._v(" "),n("p",[s._v("因为博主主要技术栈为"),n("code",[s._v("Vue")]),s._v("，所以本文通过 Vue 项目代码来说明中如何实现在 css 中使用 js 变量。")]),s._v(" "),n("p",[n("code",[s._v("Vue 2.7及 Vue3")]),s._v("中已经支持了在 css 中使用 js 变量了，只需要在css的属性值中使用 "),n("code",[s._v("v-bind")]),s._v("指令即可，简单且优雅。 Vue2虽然已经不再维护，但目前还是有部分老项目以及一些追求稳定的项目依旧在使用，下面就通过实际操作来演示下怎么做。")]),s._v(" "),n("h3",{attrs:{id:"js-中设置-css-变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js-中设置-css-变量"}},[s._v("#")]),s._v(" js 中设置 css 变量")]),s._v(" "),n("p",[s._v("在js中我们可以通过 "),n("code",[s._v("document.documentElement.style.setProperty()")]),s._v(" 来将某些变量设置css变量，例如下面语法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("document.documentElement.style.setProperty('--btnColor', 'red');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"css-中使用js变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#css-中使用js变量"}},[s._v("#")]),s._v(" css 中使用js变量")]),s._v(" "),n("p",[s._v("CSS3中引入了CSS变量的概念，使用"),n("code",[s._v("var()")]),s._v("函数代表变量名，从而使得CSS样式可以重复使用。通过使用"),n("code",[s._v("var()")]),s._v("函数，我们可以方便地引用一些在CSS预处理器中定义的变量，这些变量可以控制各种不同样式的输出，例如下面语法：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(".btn-active{\n\tcolor: var(--btnColor);\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"vue2-中还可以如何通过变量来实现动态样式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue2-中还可以如何通过变量来实现动态样式"}},[s._v("#")]),s._v(" Vue2 中还可以如何通过变量来实现动态样式")]),s._v(" "),n("p",[s._v("在Vue中，我们可以通过动态样式来绑定一些我们需要的 class 或style等，下面例子中使用了计算属性来设置动态style，例如下面代码：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<template>\n    <div>\n        <div class="test" :style="{ height: compStyle }">胸藏文墨怀若谷，腹有诗书气自华。</div>\n    </div>\n</template>\n\n<script>\n    export default {\n\n        data () {\n            return {\n                height: 100\n            }\n        },\n        computed: {\n            compStyle () {\n                return this.height * 2 + \'px\'\n            }\n        }\n    }\n<\/script>\n\n<style scoped>\n  .test {\n    width: 200px;\n    border: 1px solid #ebebeb;\n    background: pink;\n    margin: 0 auto;\n  }\n</style>\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[s._v("效果如下图所示：")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/39302c7b24c44fb29b3b53f5f39ad097.png",alt:"css中使用js变量效果图"}})]),s._v(" "),n("p",[s._v("在某些动态样式需要依据当前页面中部门变量的值来判断显示，满足不同的条件时显示不同的样式时更适合使用这种方式。例如下面业务代码中判断条件很多，根据不同的条件返回不同的结果，部分代码因为公司业务等原因已经简化，理解如何实现即可：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<template>\n    <div class=\"package-card-data\" :style=\"dynamicStyle\"></div>\n</template>\n\n<script>\n    export default {\n\n        data () {\n            return {}\n        },\n        computed: {\n            // grid 布局根据依赖源、搜索、虚拟仓库等 需要拆分为 几部分\n            dynamicStyle () {\n                let style = '1fr 1fr 1fr 1fr'\n                if (this.whetherRepoSearch) {\n                    // 在制品搜索页面时\n                    if (this.cardData.type) {\n                        // 依赖源仓库，添加了所属仓库，所以默认值为 5 + 1 = 6\n                        // 搜索条件有值的状态下，因为添加了搜索结果字段，需要加 1\n                        style = this.showRepoSearchVersion ? '2fr 2fr 2fr 2fr 1fr 1fr' : '2fr 2fr 2fr 2fr 1fr '\n                    } else {\n                        // generic 仓库\n                        style = '1fr 1fr 1fr 1fr'\n                    }\n                } else {\n                    // 非搜索页面，因为generic仓库没有使用到此组件，只有依赖源仓库在用，所以最小为 5\n                    // 虚拟仓库，因为添加了仓库来源，需要加 1\n                    style = this.whetherRepoVirtual ? '2fr 2fr 2fr 2fr 1fr 1fr' : '2fr 2fr 2fr 1fr 1fr '\n                }\n                return { 'grid-template-columns': `${style}` }\n            },\n        }\n    }\n<\/script>\n\n<style scoped>\n.package-card-data {\n    display: grid;\n}\n</style>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h3",{attrs:{id:"vue2-7-中在css中使用js变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue2-7-中在css中使用js变量"}},[s._v("#")]),s._v(" Vue2.7 中在css中使用js变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<template>\n    <div>\n        <span>胸藏文墨怀若谷，</span>\n        <span>腹有诗书气自华。</span>\n    </div>\n</template>\n\n<script>\n    export default {\n        data () {\n            return {\n                color1: 'pink',\n                color2: 'yellow'\n            }\n        }\n    }\n<\/script>\n\n<style scoped>\nspan:nth-child(1) {\n  background: v-bind(color1);\n}\nspan:nth-child(2) {\n  background: v-bind(color2);\n}\n</style>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"vue3-中在css中使用js变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue3-中在css中使用js变量"}},[s._v("#")]),s._v(" Vue3 中在css中使用js变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<script setup>\nimport { ref } from 'vue';\nconst color1 = ref('pink');\nconst color2 = ref('yellow');\n<\/script>\n\n<template>\n  <div>\n    <span>胸藏文墨怀若谷，</span>\n    <span>腹有诗书气自华。</span>\n  </div>\n</template>\n\n<style scoped>\nspan:nth-child(1) {\n  background: v-bind(color1);\n}\nspan:nth-child(2) {\n  background: v-bind(color2);\n}\n</style>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/1ae53c02144a43c488ddf2920f707fca.png",alt:"Vue2.7及Vue3中在css中使用v-bind指令设置变量的效果图"}})])])}),[],!1,null,null,null);n.default=t.exports}}]);