(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{483:function(t,n,s){"use strict";s.r(n);var e=s(7),a=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"网站由-http-协议更改为-https-协议的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网站由-http-协议更改为-https-协议的方法"}},[t._v("#")]),t._v(" 网站由 http 协议更改为 https 协议的方法")]),t._v(" "),n("h2",{attrs:{id:"http-协议和-https-协议的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-协议和-https-协议的区别"}},[t._v("#")]),t._v(" http 协议和 https 协议的区别")]),t._v(" "),n("ul",[n("li",[n("ol",[n("li",[t._v("https 协议需要到 ca 申请证书，一般免费证书较少，因而需要一定费用。")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"2"}},[n("li",[t._v("http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"3"}},[n("li",[t._v("http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。")])])]),t._v(" "),n("li",[n("ol",{attrs:{start:"4"}},[n("li",[t._v("http 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 http 协议安全。")])])])]),t._v(" "),n("h2",{attrs:{id:"_1-域名购买"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-域名购买"}},[t._v("#")]),t._v(" 1.域名购买")]),t._v(" "),n("p",[t._v("博主的域名是在腾讯云上购买的，根据自己的需要选择代理商购买域名即可。")]),t._v(" "),n("p",[t._v("腾讯云域名购买地址："),n("a",{attrs:{href:"https://dnspod.qcloud.com/?from=console",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://dnspod.qcloud.com/?from=console"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("其他代理商的域名购买地址请自行查询。")]),t._v(" "),n("h2",{attrs:{id:"_2-域名解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-域名解析"}},[t._v("#")]),t._v(" 2.域名解析")]),t._v(" "),n("p",[t._v("在购买好域名的基础上，我们需要进行域名的解析，不然通过该域名无法得知实际的公网 IP 地址")]),t._v(" "),n("p",[t._v("腾讯云域名解析地址："),n("a",{attrs:{href:"https://console.cloud.tencent.com/cns",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://console.cloud.tencent.com/cns"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("进入此页面点击"),n("code",[t._v("解析")]),t._v("，然后添加一条 A 记录(记录类型为 A，记录值为腾讯云服务器的公网 IP 地址，主机记录根据自己的需要进行选择即可，线路类型选择默认即可，TTL 默认设置 600 秒即可)，此时我们已经完成了域名的解析工作。")]),t._v(" "),n("p",[t._v("然后我们可以通过 ping 服务来测试解析是否成功，通过 ping 域名,查看返回的 IP 是否为自己的公网 IP 地址，如果返回的是自己的公网 IP 地址，即证明解析成功，可以执行后续操作了。此时在浏览器的地址栏中输入自己的域名即可打开自己通过公网 IP 才能打开的网站。")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("例如：\nping gujunling.github.io\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("若出现如下页面即表示解析成功")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/1773dfd319944ebeba8b342833664a28.png",alt:""}})]),t._v(" "),n("h2",{attrs:{id:"_3-申请并下载-ssl-证书"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-申请并下载-ssl-证书"}},[t._v("#")]),t._v(" 3.申请并下载 SSL 证书")]),t._v(" "),n("p",[t._v("SSL 证书申请地址："),n("a",{attrs:{href:"https://console.cloud.tencent.com/ssl",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://console.cloud.tencent.com/ssl"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("进入此页面点击"),n("code",[t._v("申请免费证书")]),t._v("或者"),n("code",[t._v("购买证书")]),t._v("均可，根据自己的需要进行选择即可，一般情况下若没有特殊作用的建议选择申请免费证书。")]),t._v(" "),n("p",[t._v("点击申请免费证书后，在出现下图所示页面后点击"),n("code",[t._v("确定")]),t._v("即可。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/3f51d896719d4994808b90876f21a291.png",alt:""}})]),t._v(" "),n("p",[t._v("然后在新的页面中根据提示信息进行操作即可，（私钥密码根据自己的情况选择是否设置）")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/415d30fd343645e782cc426e3a2a25ae.png",alt:""}})]),t._v(" "),n("p",[t._v("填写完成后等待腾讯审核即可，一般这个审核较快，最长不会超过一天，审核通过后可以在我的证书页面中看到自己的已经签发的证书，然后点击下载即可。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/4c86b37d1c424e818d2ec453f9f31b58.png",alt:""}})]),t._v(" "),n("h2",{attrs:{id:"_4-上传证书到自己的服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-上传证书到自己的服务器"}},[t._v("#")]),t._v(" 4.上传证书到自己的服务器")]),t._v(" "),n("p",[t._v("将上一步中下载的证书解压，然后根据自己的服务(apache/nginx/tomcat 等)选择将相应的文件上传到自己的服务器即可。此处可以通过 FileZilla 或者 xftp 将文件上传到服务器，具体如何上传可以根据自己的喜好选择即可。")]),t._v(" "),n("p",[t._v("FileZilla 官网："),n("a",{attrs:{href:"https://filezilla-project.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://filezilla-project.org/"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("xftp 官网："),n("a",{attrs:{href:"https://www.netsarang.com/zh/xftp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.netsarang.com/zh/xftp/"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("strong",[t._v("注意：若使用的是 nginx 服务，即将解压文件夹下的 nginx 目录下的两个文件上传到 nginx 的安装目录下的 conf 目录下，其他服务请查看腾讯的文档进行上传")])]),t._v(" "),n("p",[t._v("例如我的 nginx 目录下的这两个文件，将其上传到自己的服务器的 nginx 安装目录下的 conf 文件夹下即可。")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://gujunling.github.io/images/db04a446a261485082fa3c6d7b932440.png",alt:""}})]),t._v(" "),n("p",[t._v("腾讯官方的 SSL 证书安装教程："),n("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35244",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloud.tencent.com/document/product/400/35244"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"_5-修改服务器上的-nginx-目录下的-nginx-conf-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改服务器上的-nginx-目录下的-nginx-conf-文件"}},[t._v("#")]),t._v(" 5.修改服务器上的 nginx 目录下的 nginx.conf 文件")]),t._v(" "),n("p",[t._v("在上一步的文件上传成功后，需要修改服务器上的 nginx 目录下的"),n("code",[t._v("nginx.conf")]),t._v("文件。")]),t._v(" "),n("ul",[n("li",[t._v("此操作可通过执行 vim /usr/local/nginx/conf/nginx.conf 命令行编辑该文件。")]),t._v(" "),n("li",[t._v("由于版本问题，配置文件可能存在不同的写法。例如：Nginx 版本为 nginx/1.15.0 以上请使用 listen 443 ssl 代替 listen 443 和 ssl on。")])]),t._v(" "),n("p",[t._v("在 nginx.conf 文件中添加如下信息：")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n    #SSL 访问端口号为 443\n    listen 443 ssl;\n #填写绑定证书的域名\n # cloud.tencent.com为自己的域名\n    server_name cloud.tencent.com;\n #证书文件名称\n # 1_cloud.tencent.com_bundle.crt为你自己下载的文件中以.crt结尾的文件名\n    ssl_certificate 1_cloud.tencent.com_bundle.crt;\n #私钥文件名称\n # 2_cloud.tencent.com.key 为你自己下载的文件中以.key结尾的文件名\n    ssl_certificate_key 2_cloud.tencent.com.key;\n    ssl_session_timeout 5m;\n #请按照以下协议配置\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\n    ssl_prefer_server_ciphers on;\n    location / {\n    #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。\n    # 此时的root下的路径保持和自己的http协议下的另一个server中的root下的路径一致\n        root html;\n        index  index.html index.htm;\n    }\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br")])]),n("p",[t._v("修改配置文件后，需要经 nginx 重启一下，修改才能生效")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sudo service nginx reload\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("配置完成后即可通过 https 协议访问自己的域名。")]),t._v(" "),n("p",[n("strong",[t._v("注意，若重启 nginx 服务报如下错误（ssl parameter requires ngx_http_ssl_module），则证明 nginx 安装时缺少 http_ssl_module 模块，解决方案参考下文")])]),t._v(" "),n("p",[t._v("解决方案可参考我的另一篇文章："),n("a",{attrs:{href:"https://gujunling.github.io/pages/3cce56/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gujunling.github.io/pages/3cce56/"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("或参考此文："),n("a",{attrs:{href:"https://www.jianshu.com/p/9e81818028b7",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/9e81818028b7"),n("OutboundLink")],1),t._v(" "),n("strong",[t._v("若按照此文章配置不成功的情况下，可以将 nginx 服务删除，然后重新安装，在安装时配置安装 http_ssl_module 模块，具体可参考我的文章"),n("a",{attrs:{href:"https://gujunling.github.io/pages/3cce56/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gujunling.github.io/pages/3cce56/"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"_6-http-重定向到-https-协议-可选"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-http-重定向到-https-协议-可选"}},[t._v("#")]),t._v(" 6.http 重定向到 https 协议（可选）")]),t._v(" "),n("p",[t._v("在浏览器中直接输入域名访问的是 http 协议，若需要将 http 请求重定向到 https 请求，则可以执行下方操作，即修改 nginx 安装目录下的"),n("code",[t._v("nginx.conf")]),t._v("文件。")]),t._v(" "),n("p",[t._v("配置 SSL 证书和重定向到 https 请求")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n    #SSL 访问端口号为 443\n    listen 443 ssl;\n #填写绑定证书的域名\n # cloud.tencent.com为自己的域名\n    server_name cloud.tencent.com;\n #证书文件名称\n # 1_cloud.tencent.com_bundle.crt为你自己下载的文件中以.crt结尾的文件名\n    ssl_certificate 1_cloud.tencent.com_bundle.crt;\n #私钥文件名称\n # 2_cloud.tencent.com.key 为你自己下载的文件中以.key结尾的文件名\n    ssl_certificate_key 2_cloud.tencent.com.key;\n    ssl_session_timeout 5m;\n #请按照以下协议配置\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\n    ssl_prefer_server_ciphers on;\n    location / {\n    #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。\n    # 此时的root下的路径保持和自己的http协议下的另一个server中的root下的路径一致\n        root html;\n        index  index.html index.htm;\n    }\n}\n\nserver {\nlisten 80;\n#填写绑定证书的域名\n# cloud.tencent.com为你自己的域名\nserver_name cloud.tencent.com;\n#把http的域名请求转成https\nreturn 301 https://$host$request_uri;\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br")])]),n("p",[t._v("修改完成后，重启 nginx 服务即可")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sudo service nginx reload\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("h2",{attrs:{id:"完成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#完成"}},[t._v("#")]),t._v(" 完成")]),t._v(" "),n("p",[t._v("此时已经安装配置完成了，可以通过 https 协议访问自己的域名了，且使用 http 协议访问此域名时会自动重定向到 https 请求。")]),t._v(" "),n("h3",{attrs:{id:"参考文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档：")]),t._v(" "),n("p",[t._v("腾讯官方的 SSL 证书安装教程："),n("a",{attrs:{href:"https://cloud.tencent.com/document/product/400/35244",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cloud.tencent.com/document/product/400/35244"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("centos7 安装配置 nginx 服务："),n("a",{attrs:{href:"https://gujunling.github.io/pages/3cce56/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gujunling.github.io/pages/3cce56/"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=a.exports}}]);